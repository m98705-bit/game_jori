<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ジョリーロジャー ステータス推測ツール</title>
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>

    <header>
        <h1>ジョリーロジャー ステータス推測・検証ツール</h1>
        <p>レアリティ、覚醒、レベルを入力し、推定ステータスを計算します。</p>
    </header>

    <main>
        <div class="input-section">
            <h2>カード情報入力</h2>

            <h3>1. カード基本情報</h3>
            <div class="input-row compact-row">
                <div class="input-group">
                    <label for="rarity">レアリティ:</label>
                    <select id="rarity" name="rarity" onchange="resetLevel()">
                        <option value="10" data-max-awakening="18">N (★1)</option>
                        <option value="20" data-max-awakening="18">HN (★2)</option>
                        <option value="30" data-max-awakening="18" selected>R (★3)</option>
                        <option value="40" data-max-awakening="18">HR (★4)</option>
                        <option value="50" data-max-awakening="18">SR (★5)</option>
                        <option value="60" data-max-awakening="18">UR (★6)</option>
                        <option value="70" data-max-awakening="18">Legend (★7)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="awakening">覚醒回数:</label>
                    <input type="number" id="awakening" name="awakening" value="0" min="0" max="99" onchange="resetLevel()">
                </div>

                <div class="input-group">
                    <label for="level">現Lv:</label>
                    <input type="number" id="level" name="level" value="1" min="1" max="999">
                </div>
            </div>
            
            <div class="input-group">
                <label for="growth_type">成長型 (LvUP時ステータス):</label>
                <select id="growth_type" name="growth_type" onchange="calculateStatus()">
                    <option value="HH" data-hp="3" data-atk="1" data-spd="1" selected>HH型 (HP+3, ATK+1, SPD+1)</option>
                    <option value="AA" data-hp="1" data-atk="3" data-spd="1">AA型 (HP+1, ATK+3, SPD+1)</option>
                    <option value="SS" data-hp="1" data-atk="1" data-spd="3">SS型 (HP+1, ATK+1, SPD+3)</option>
                    <option value="HA" data-hp="2" data-atk="2" data-spd="1">HA型 (HP+2, ATK+2, SPD+1)</option>
                    <option value="HS" data-hp="2" data-atk="1" data-spd="2">HS型 (HP+2, ATK+1, SPD+2)</option>
                    <option value="AS" data-hp="1" data-atk="2" data-spd="2">AS型 (HP+1, ATK+2, SPD+2)</option>
                </select>
            </div>
            
            <hr>

            <h3>2. アクセサリ選択 (Lv.1ボーナス計算用)</h3>
            <div class="input-group">
                <label for="accessory_type">アクセサリの種類と宝石:</label>
                <select id="accessory_type" name="accessory_type" onchange="calculateStatus()">
                    <optgroup label="補正なし">
                        <option value="none" data-boost="none" data-gem-value="0" selected>なし</option>
                    </optgroup>
                    <optgroup label="単一ステータス補正 (10～50)">
                        <option value="necklace_dia" data-boost="hp" data-gem-value="50">ダイヤのネックレス (HP +50)</option>
                        <option value="bracelet_dia" data-boost="atk" data-gem-value="50">ダイヤのブレスレット (ATK +50)</option>
                        <option value="ring_dia" data-boost="spd" data-gem-value="50">ダイヤのリング (SPD +50)</option>
                    </optgroup>
                    <optgroup label="複合ステータス補正 (5～25)">
                        <option value="brooch_dia" data-boost="hp_spd" data-gem-value="25">ダイヤのブローチ (HP/SPD +25)</option>
                        <option value="belt_dia" data-boost="hp_atk" data-gem-value="25">ダイヤのベルト (HP/ATK +25)</option>
                        <option value="earrings_dia" data-boost="atk_spd" data-gem-value="25">ダイヤのイヤリング (ATK/SPD +25)</option>
                    </optgroup>
                </select>
            </div>

            <hr>
            
            <h3>3. 初期ステータス (覚醒0回時のLv.1)</h3>
            <div class="input-row">
                <div class="input-group">
                    <label for="base_hp">HP:</label>
                    <input type="number" id="base_hp" name="base_hp" value="300" min="1" onchange="calculateStatus()">
                </div>
                <div class="input-group">
                    <label for="base_atk">ATK:</label>
                    <input type="number" id="base_atk" name="base_atk" value="100" min="1" onchange="calculateStatus()">
                </div>
                <div class="input-group">
                    <label for="base_spd">SPD:</label>
                    <input type="number" id="base_spd" name="base_spd" value="20" min="1" onchange="calculateStatus()">
                </div>
            </div>
            
        </div>
        
        <div class="result-section">
            <h2>推測結果</h2>
            <p id="result-message">入力値を検証し、推測結果を表示します。</p>

            <hr>
            
            <h3>Lv.上限情報</h3>
            <p id="level-info"></p>
            <p id="max-level-info"></p>

            <hr>

            <h3>最終ステータス (<span id="current-level-display">Lv. 1</span> 時点)</h3>
            <p id="final-hp">体力 (HP): -</p>
            <p id="final-atk">攻撃 (ATK): -</p>
            <p id="final-spd">速さ (SPD): -</p>

            <div class="debug-info-toggle" onclick="toggleDebugInfo()">
                <small>詳細情報/デバッグ情報を表示 🔽</small>
            </div>
            <pre id="debug-output" style="display:none; text-align: left; background: #eee; padding: 10px; border-radius: 4px; overflow-x: auto;"></pre>
        </div>
    </main>

    <script src="script.js"></script>
</body>
</html>